# Go Application ‚Äî Notes Service

–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–º–µ—Ç–∫–∞–º–∏ –Ω–∞ —è–∑—ã–∫–µ Go.

---

## –ö—Ä–∞—Ç–∫–æ

–ü—Ä–æ–µ–∫—Ç ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π REST-—Å–µ—Ä–≤–∏—Å –¥–ª—è CRUD-–æ–ø–µ—Ä–∞—Ü–∏–π —Å –∑–∞–º–µ—Ç–∫–∞–º–∏ (notes). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç:

* Go
* Gorilla Mux (—Ä–æ—É—Ç–∏–Ω–≥)
* GORM (ORM)
* PostgreSQL (–≤ production) –∏–ª–∏ SQLite (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–æ–≤)

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- `main.go` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- `controllers/` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
- `db/` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (Postgres)
- `models/` ‚Äî –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- `utils/` ‚Äî –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã
- `k6/` ‚Äî —Å—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

* –î–ª—è Postgres (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):

  * `db_user` (–ø—Ä–∏–º–µ—Ä: `postgres`)
  * `db_pass` (–ø—Ä–∏–º–µ—Ä: `postgres`)
  * `db_name` (–ø—Ä–∏–º–µ—Ä: `postgres`)
  * `db_host` (–ø—Ä–∏–º–µ—Ä: `localhost` –∏–ª–∏ `db` –≤ docker-compose)
  * `db_port` (–ø—Ä–∏–º–µ—Ä: `5432`)

* –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å `DB_DIALECT`:

  * `postgres` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  * `sqlite3` ‚Äî –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏/—Ç–µ—Å—Ç–æ–≤

* –î–ª—è sqlite3 —É–∫–∞–∂–∏—Ç–µ `DB_CONN` (–Ω–∞–ø—Ä–∏–º–µ—Ä `:memory:` –∏–ª–∏ `file:test.db?cache=shared`).

---

## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (Windows / PowerShell)

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Go (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 1.18+). –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `go` –≤ PATH.
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env-example` –≤ `.env` –∏–ª–∏ –∑–∞–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ PowerShell:

```powershell
$env:DB_DIALECT = "postgres"
$env:db_user = "postgres"
$env:db_pass = "postgres"
$env:db_name = "postgres"
$env:db_host = "localhost"
$env:db_port = "5432"
````

3. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```powershell
go mod tidy
go build -o main .
.\\main.exe
```

–°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8080`.

### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ Postgres ‚Äî SQLite in-memory (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

```powershell
$env:DB_DIALECT = "sqlite3"
$env:DB_CONN = ":memory:"
go run main.go
```

---

## –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

```bash
docker-compose up --build
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ `http://localhost:8080`.
Postgres –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

---

## üìù API

### CRUD Notes

| –ú–µ—Ç–æ–¥  | –ü—É—Ç—å        | –û–ø–∏—Å–∞–Ω–∏–µ                                                                   |
| ------ | ----------- | -------------------------------------------------------------------------- |
| GET    | /notes      | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–º–µ—Ç–æ–∫ (`?query=<text>` –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ title/content) |
| POST   | /notes      | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É. JSON: `{ "title": "..", "content": ".." }`          |
| GET    | /notes/{id} | –ü–æ–ª—É—á–∏—Ç—å –∑–∞–º–µ—Ç–∫—É –ø–æ ID                                                     |
| PUT    | /notes/{id} | –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É –ø–æ ID                                                     |
| DELETE | /notes/{id} | –£–¥–∞–ª–∏—Ç—å –∑–∞–º–µ—Ç–∫—É –ø–æ ID                                                      |

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å                        | –û–ø–∏—Å–∞–Ω–∏–µ                  |
| ----- | --------------------------- | ------------------------- |
| GET   | /analytics/summary          | –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –ø–æ —Å–µ—Ä–≤–∏—Å—É |
| GET   | /analytics/notes/count      | –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–º–µ—Ç–æ–∫  |
| GET   | /analytics/notes/avg-length | –°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ –∑–∞–º–µ—Ç–æ–∫     |

–ü—Ä–∏–º–µ—Ä JSON-–æ—Ç–≤–µ—Ç–∞ –¥–ª—è `/analytics/notes/avg-length`:

```json
{
  "avg_note_length": 123
}
```

---

## üß™ –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker:

```bash
docker compose run --rm app go test ./...
```

–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞:

```bash
=== RUN   TestHandleBadRequest
--- PASS: TestHandleBadRequest (0.00s)
...
PASS
ok      go-app/utils 0.008s
```

---

## ‚ö° –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (K6)

* 50 –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (VUs)
* –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 1 –º–∏–Ω—É—Ç–∞
* –ú–µ—Ç—Ä–∏–∫–∏: RPS, latency, error rate

–ó–∞–ø—É—Å–∫:

```bash
docker compose run --rm k6
```

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```
http_req_duration avg=285.9ms  p(95)=555.78ms
http_reqs............: 7773   128.8/s
checks_succeeded...: 100%
```

---

## üõ† CI/CD

* Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
* –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ `docker-compose up -d`
* –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞ –≤ `.github/workflows/ci.yml` –∏–ª–∏ `.gitlab-ci.yml`

–ü—Ä–∏–º–µ—Ä —à–∞–≥–æ–≤:

```yaml
build:
  stage: build
  script:
    - docker build -t go-app .

test:
  stage: test
  script:
    - docker run --rm go-app go test ./...

deploy:
  stage: deploy
  script:
    - docker-compose up -d
```

---

## üîó –°—Å—ã–ª–∫–∏

* –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `https://github.com/Neuron-Activation/ai-vibecoding`
* –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è K6: `https://k6.io/docs/`
* Docker: `https://www.docker.com/`

jnjm